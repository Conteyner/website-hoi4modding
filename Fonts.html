<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="header">
        <A href="index.html"><button id="leftButton"> <span>Назад</span>
            </button></A>
        <a href="https://discord.gg/east-showdown-1024735523589324830"><img class="icon" id="discord-icon"
                src="discord.png" alt="Дискорд"></a>
        <a href="https://github.com/Conteyner/website-hoi4modding"><img class="icon" id="github-icon" src="github.png"
                alt="Гитхаб"></a>

    </div>
    <h1>Моддинг шрифтов</h1>
    <div id="table-of-contents">
        <h2>Содержание</h2>
        <ul>
            <li><a href="#section1">Создание нового шрифта</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section2">Настройки шрифта</a>
            </li>
        </ul>

        <ul>
            <li>
                <a href="#section3">Параметры экспорта</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section4">Выбор символов шрифта</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section5">Сохранение шрифта</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section6">Быстрый чек-лист</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section7">Kerning</a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="#section8">Определение bitmap</a>
            </li>
        </ul>
    </div>
    <div class="block">
    <h2 id="section1">Создание нового шрифта</h2>
    <P>
        Для создания нового шрифта требуется программа <a href = "http://www.angelcode.com/products/bmfont/">BMFont</a>, которая используется для создания страницы шрифта и файла дескриптора шрифта. <Br>

После установки BMFont откройте ее и откройте меню опций, затем настройки шрифта, импортируйте файл шрифта, затем выберите шрифт из выпадающего меню (файлы шрифтов можно найти и загрузить на сайте google fonts) После этого вы можете приступить к настройке параметров шрифта.
    </P>
    <h2 id="section2">
        Настройки шрифта
    </h2>
    <p>
        После импорта шрифта пришло время настроить его внешний вид. Для этого снова откройте меню Настройки шрифта. Ниже приведены поля, которые необходимо изменить:
    </p>
    <p>
        Charset: установите значение Unicode. <br>
    Размер: это размер шрифта, установите желаемый размер. (Обратите внимание, что более высокие значения могут сделать ваш файл слишком большим для
     чтения игрой). <br>
    Соответствие высоты символов: установите этот флажок, чтобы каждый символ имел одинаковую высоту. <br>
    Сглаживание шрифта: установите этот параметр, если ваш шрифт может выглядеть слишком резким в игре. <br>
    Толщина контура: если вы хотите, чтобы шрифт имел контур, установите здесь нужную толщину.
    </p>
    <p>
        После этого нажмите "OK", чтобы сохранить изменения.
    </p>
    <h2 id="section3">
        Параметры экспорта 
    </h2>
    <p>
        После настройки шрифта пришло время задать способ его экспорта. Для этого откройте меню Параметры экспорта. Ниже перечислены поля, которые вы можете изменить:
    </p>
    <p>
        Padding: управляет отступом между каждым символом в изображении шрифта. Необходим только в том случае, если вы собираетесь 
        вручную редактировать файл шрифта и не хотите, чтобы символы располагались слишком близко друг к другу. <Br>
    Битовая глубина: Установите значение 32<Br>
    Промежуток: определяет минимальное расстояние между символами в изображении шрифта. Установите значение 1-1, или больше, 
    если между символами есть размытие. <Br>
    Ширина: регулирует ширину изображения шрифта. Настройте это значение так, чтобы все символы помещались на одном изображении. (Обратите внимание, что большие значения могут сделать ваш файл слишком большим для чтения игрой). <Br>
    Высота: регулирует высоту изображения шрифта. Настройте этот параметр так, чтобы все символы поместились на одном изображении. (Обратите внимание, что большие значения могут сделать ваш файл слишком большим для чтения игрой) <Br>
    Каналы: определяет способ компоновки символов. Установите их все на глиф, если вы не указали контур, в этом случае установите альфа-канал (A) на контур, а остальные на глиф. <Br>
    Предустановки: Выберите любой, который подходит для вашего текста, но выбирайте только те, которые имеют альфа-канал. <Br>
    Дескриптор шрифта: должен быть установлен на text. <Br>
    Текстуры: должны быть установлены в .dds
    </p>
    <p>
        После этого нажмите "OK", чтобы сохранить изменения.
    </p>
    <h2 id="section4">
        Выбор символов шрифта
    </h2>
    <p>
        Справа находятся флажки для различных типов символов, если используется символ, которого нет в шрифте, он будет показан в виде вопросительного знака в окошке. Выберите те, которые соответствуют тому, для 
        чего вы используете шрифт, помня, что файлы шрифтов могут быть слишком большими для чтения игрой.
    </p>
    <p>
        Рекомендуемые:
    </p>
    <div class="card" style="height: 150px ">
        <div class="textincard">
          <pre>
* Латинский язык + Латинское дополнение
* Латинский расширенный A
* Латинский расширенный B
* Латинский расширенный дополнительный
* Общая пунктуация            
          </pre>
        </div>
    </div>
    <h2 id="section5">
        Сохранение шрифта
    </h2>
    <p>
        Установив шрифт так, как вам хотелось бы, проверьте, помещаются ли все символы на одной странице, нажав на кнопку Визуализировать в меню Параметры. Если это не так, необходимо увеличить размер изображения шрифта по ширине и высоте.
<br>
Сохраните шрифт, нажав кнопку "Сохранить растровый шрифт как..." в меню параметров.

    </p>
<p>
    Файл изображения и файл шрифта должны быть названы одинаково, за исключением расширения файла. Хотя в файлах *.fnt указано, какой файл изображения следует использовать, игра полностью игнорирует это, предпочитая использовать файл с
     тем же именем до расширения. Это также видно по отсутствию расширения файла в определении bitmapfont. 
     Растровый шрифт не обязательно должен иметь то же имя, что и файлы шрифтов, поэтому файл в каталоге <i>/Hearts of Iron IV/gfx/fonts</i> не гарантирует, что существует шрифт с таким же именем.

    Расположение шрифта определяется определением bitmapfont, поэтому нет необходимости использовать папку <i>/Hearts of Iron IV/gfx/fonts/</i>, однако базовая игра хранит все свои шрифты там. Шрифт карты - это растровый шрифт tahoma_60, который по умолчанию ссылается на файлы /Hearts of Iron IV/gfx/fonts/hoi_mapfont4. 
</p>
<h2 id="section6">
    Быстрый чек-лист
</h2>
<p>
    Откройте BMFont и выберите шрифт. <br><br>
    Установите соответствующие настройки шрифта и сохраните изменения.<br><br>
    Экспортируйте шрифт с соответствующими настройками и необходимыми наборами символов.<br><br>
    Удалите _0 из конца имени полученного файла .dds, чтобы он имел то же имя, что и файл, определяющий шрифт.<br><br>
    При необходимости добавьте кернинг к шрифту.<br><br>
    Если вы добавляете новый шрифт, а не редактируете существующий, добавьте определение bitmapfont = { ... } определение.
</p>
</div>

<h1 id="section7">Kerning</h1>
<div class="block">
    <P>
    Многие шрифты не экспортируются с информацией о кернинге, включенной в файл дескриптора шрифта. Это может привести к наложению символов в игре, что может выглядеть некрасиво. Чтобы исправить это, необходимо добавить информацию о кернинге в файл дескриптора шрифта.

Для этого откройте файл дескриптора шрифта и добавьте новую строку в следующем формате для каждой пары кернингов:
</P>
<P>
    кернинг первый=&lt;позиция символа второй&gt;=&lt;позиция символа&gt; количество=&lt;ширина пикселя&gt;
</P>
<p>
    Положение символа в шрифте можно увидеть в BMFont, посмотрев в нижнем правом углу строки состояния при наведении курсора на символ в полотне шрифта. <Br>

Количество пикселей - это пространство между первым и вторым символом. <BR>

Вы, наверное, поняли, что вручную создавать каждую пару кернинга не очень целесообразно. Лучше всего использовать язык программирования (например, Python) для создания линий кернинга. Ниже приведен пример сценария, который можно использовать в Python 3.x или выше:
</p>
<div class="card" style="height: 350px ">
    <div class="textincard">
      <pre>
    file = open( "kerning.txt", "wt" )

    <span style="color: rgba(64, 113, 84, 0.952);">#Добавьте сюда позиции символов из пустых слотов для символов.</span>
    exclude = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14 , 15, 16, 17, 18, 19, 20, 21, 22, 23, 25, 26,
                27, 28, 29, 30, 31, 127, 129, 141, 143, 144, 156, 173, 181]

    for x in range( 1, 255 ):
        for y in range(1, 255):
            if x not in exclude:
                if y not in exclude:
                    file.write( "kerning first={0}  second={1}  amount=1\n".format( x, y ) )

    file.close()
      </pre>
    </div>
</div>
</div>

<h1 id="section8">Определение bitmap</h1>
<div class="block"> 
    <p>
        Для того чтобы связать новый файл в <i>/Hearts of Iron IV/gfx/fonts</i> со шрифтом, необходимо создать запись в файле 
        <i> /Hearts of Iron IV/interface/*.gfx</i>. 
        При редактировании уже существующего шрифта эта запись уже существует и ее не нужно изменять. Пример записи выглядит следующим образом:
    </p>
    <div class="card" style="height: 350px ">
        <div class="textincard">
          <pre>
bitmapfonts = {
    bitmapfont = {
        name = "мой_шрифт"
        fontfiles = {
            "gfx/fonts/мой_шрифт"
            "gfx/fonts/мой_второй_шрифт"
        }
        color = 0xffffffff

        textcolors = {
            G = { 86 172 91 }
        }
    }
}
          </pre>
        </div>
    </div>
    <p>
        names указывает имя шрифта. Оно используется для элементов интерфейса, которые используют текст для обозначения используемого файла шрифта. 
        Это все, для чего используются шрифты, за исключением шрифта карты, который всегда tahoma_60. Чтобы найти, где именно используется растровый шрифт базовой игры, лучше всего найти каждый *.gui файл в папке интерфейса с помощью текстового редактора и
         проверить результаты поиска для получения полного списка. <Br>

fontfiles указывает местоположение каждого файла, используемого в шрифте. Это путь к файлу <i>/Hearts of Iron IV/gfx/fonts/*.fnt</i> без расширения 
.fnt. Файлы не должны иметь пересекающихся символов. Если шрифт использует всего один файл шрифта, вместо него можно использовать <i> path
 = "gfx/fonts/my_font"</i>.  <Br>
color определяет цвет шрифта в шестнадцатеричном коде формата ARGB. Первые 2 символа после 0x определяют 
прозрачность шрифта, 00 означает полную прозрачность, а FF - полную непрозрачность. Последние 6 символов представляют
 собой шестнадцатеричный код RGB, каждый цвет определяется по шкале от 00 до FF.  <Br>
textcolors обеспечивает переопределение цветов текста, позволяя изменить определенный цвет текста так, 
чтобы при использовании данного шрифта он имел другой цвет по сравнению со значением по умолчанию. <Br>

Кроме того, можно переопределить растровый шрифт, чтобы использовать другие настройки, когда игра настроена 
на использование определенного языка. Такая запись в файле <i>/Hearts of Iron IV/interface/*.gfx</i> выглядит следующим образом:
    </p>
    <div class="card" style="height: 190px ">
        <div class="textincard">
          <pre>
bitmapfonts = {
    bitmapfont_override = {
        name = "мой_шрифт"
        path = "gfx/fonts/мой_шрифт_cyrillic"
        languages = { "l_russian" "l_polish" }
    }
}
          </pre>
        </div>
    </div> 
    <P>
        В основном это используется для того, чтобы шрифты, не поддерживающие кириллические символы, 
        используемые в русском языке, отображались как совершенно другой шрифт, поддерживающий их, когда этого требует язык.
    </P>
</div>




<button onclick="topFunction()" id="scroll-to-top" title="Наверх">&#8593;</button>
<script src="script.js"></script>
<footer>
    <div class="footer-content">
        <p>Сайт создан conteynerrrr#0944 при поддержке<span class="footer-highlight"> East Showdown Team</span></p>
    </div>
</footer>


</body>
</html>
